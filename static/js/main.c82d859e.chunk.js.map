{"version":3,"sources":["scenes/scene-1/index.module.scss","scenes/scene-1/ui/index.module.scss","scenes/scene-1/ui/score/Score.module.scss","components/SceneComponent/SceneComponent.tsx","scenes/scene-1/game/meshes/player/player.ts","scenes/scene-1/game/meshes/player/animations.ts","interfaces/Prefab.ts","utils/chained-list/chained-list.ts","utils/infinite-background/infinite-background.ts","scenes/scene-1/game/meshes/sky.ts","scenes/scene-1/game/meshes/ground.ts","scenes/scene-1/game/meshes/city.ts","scenes/scene-1/game/camera.ts","scenes/scene-1/game/movement/movement.ts","store/store.ts","scenes/scene-1/game/obstacles/obstacles.ts","scenes/scene-1/game/meshes/mountains.ts","scenes/scene-1/game/meshes/street.ts","scenes/scene-1/game/meshes/fence.ts","scenes/scene-1/game/index.tsx","scenes/scene-1/ui/score/Score.tsx","scenes/scene-1/ui/index.tsx","scenes/scene-1/index.tsx","App.tsx","serviceWorkerRegistration.ts","reportWebVitals.ts","index.tsx"],"names":["module","exports","SceneComponent","props","reactCanvas","useRef","antialias","engineOptions","adaptToDeviceRatio","sceneOptions","onRender","rest","onSceneReady","useEffect","current","engine","Engine","scene","Scene","isReady","onReadyObservable","addOnce","currentScene","runRenderLoop","render","resize","getEngine","window","addEventListener","dispose","removeEventListener","ref","style","width","height","Player","states","died","events","die","bind","initSounds","fall","Sound","this","volume","_sounds","play","mesh","physicsImpostor","beginDirectAnimation","frameRate","positionFrames","rotationFrames","position","Animation","ANIMATIONTYPE_FLOAT","ANIMATIONLOOPMODE_CONSTANT","rotation","push","frame","value","setKeys","Math","PI","dieAnimation","SceneLoader","ImportMeshAsync","player","meshes","name","parent","Vector3","y","PhysicsImpostor","BoxImpostor","mass","restitution","rotationQuaternion","_mesh","_parent","_texture","ListNode","next","ChainedList","_head","_last","_size","item","head","last","InfiniteBackground","velocityX","velocityY","opts","instancesQty","container","instances","Mesh","initializeMeshes","despawnPlace","fillSpawnSpace","spawnPlace","onBeforeRenderObservable","add","animationRatio","getAnimationRatio","instance","x","addInstance","removeInstance","removeFirstItem","addChild","forEach","setEnabled","lastMeshSize","getBoundingInfo","boundingBox","extendSizeWorld","lastMeshPosition","currentMeshSize","positionX","positionY","positionZ","z","addItem","getMesh","hasEnougth","positionLastMesh","index","floor","random","length","clone","createSky","background","MeshBuilder","CreatePlane","backgroundMaterial","StandardMaterial","diffuseColor","Color3","specularColor","material","createGround","sliderGround","CreateBox","sliderGroundMaterial","diffuseTexture","Texture","hasAlpha","createSliderGround","invisibleGround","size","invisibleGroundMaterial","alpha","createInvisibleGround","createBackground","test","createCamera","camera","ArcRotateCamera","radius","attachControl","move","tempOpts","inputMap","newScene","jump","actionManager","ActionManager","registerAction","ExecuteCodeAction","OnKeyDownTrigger","evt","sourceEvent","key","type","OnKeyUpTrigger","jumping","canJump","impulseDirection","isJumping","setLinearVelocity","applyImpulse","scale","getAbsolutePosition","Store","score","onUpdateScore","Observable","Obstacles","prevTime","Date","getTime","currentTime","trySpawnTime","obstacleLimit","trySpawnTimeout","activeElement","obstacles","obstacleCounter","createObstaclesLimit","i","jumpedObstacle","notifyObservers","checkObstacleHit","checkObstacleHitsLimit","obstacle","intersectsMesh","splice","pointPlane","getChildMeshes","intersected","minDelay","maxDelay","isMaxDelay","isMinDelay","shouldSpawn","kind","generateElement","planeMaterial","trash","dog","scaling","cone","bucket","createObstacles","canSpawn","spawnObstacle","createMountains","mountain","mountainMaterial","createStreet","street","streetMaterial","texture","wAng","createFence","fence","fenceMaterial","onSceneMount","enablePhysics","AmmoJSPlugin","initMesh","HemisphericLight","intensity","init","moveOpts","jumpStartTime","loop","autoplay","registerOnPhysicsCollide","spawnWithDelay","debugLayer","show","Game","id","memo","Score","className","scss","UI","ui","Scene1","useState","setScore","canvaContainer","App","Boolean","location","hostname","match","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","Ammo","ReactDOM","StrictMode","document","getElementById","navigator","serviceWorker","ready","registration","unregister","catch","error","console","message"],"mappings":"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","file":"static/js/main.c82d859e.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"canvaContainer\":\"scene-1_canvaContainer__2Oiz4\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ui\":\"ui_ui__3YHo6\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"score\":\"Score_score__2k693\"};","import { useEffect, useRef } from 'react';\n\nimport { Engine, Scene } from 'babylonjs';\n\nimport { ISceneComponent } from './types';\n\nfunction SceneComponent(props: ISceneComponent) {\n  const reactCanvas = useRef(null);\n  const {\n    antialias,\n    engineOptions,\n    adaptToDeviceRatio,\n    sceneOptions,\n    onRender,\n    onSceneReady,\n    ...rest\n  } = props;\n\n  useEffect(() => {\n    if (reactCanvas.current) {\n      const engine = new Engine(reactCanvas.current, antialias, engineOptions, adaptToDeviceRatio);\n      const scene = new Scene(engine, sceneOptions);\n      if (scene.isReady()) {\n        props.onSceneReady(scene);\n      } else {\n        scene.onReadyObservable.addOnce((currentScene) => props.onSceneReady(currentScene));\n      }\n\n      engine.runRenderLoop(() => {\n        if (typeof onRender === 'function') {\n          onRender(scene);\n        }\n        scene.render();\n      });\n\n      const resize = () => {\n        scene.getEngine().resize();\n      };\n\n      if (window) {\n        window.addEventListener('resize', resize);\n      }\n\n      return () => {\n        scene.getEngine().dispose();\n\n        if (window) {\n          window.removeEventListener('resize', resize);\n        }\n      };\n    }\n\n    return undefined;\n  }, [adaptToDeviceRatio, antialias, engineOptions, onRender, props, reactCanvas, sceneOptions]);\n\n  return <canvas ref={reactCanvas} {...rest} style={{width: '100%', height: '100%'}} />;\n}\n\nexport default SceneComponent;\n","import { PhysicsImpostor, Scene, SceneLoader, Sound, Mesh, Vector3 } from 'babylonjs';\nimport { APrefab  } from '../../../../../interfaces/Prefab';\nimport { dieAnimation } from './animations';\n\nexport class Player extends APrefab {\n  states = {\n    died: false,\n  };\n\n  events = {\n    die: this.die.bind(this)\n  };\n\n  constructor(private scene: Scene) {\n    super();\n    this.initSounds();\n  }\n\n  initSounds() {\n    const fall = new Sound(\"fall\", \"assets/scene-1/songs/fall.mp3\", this.scene, null, {\n      volume: 0.5\n    })\n\n    this._sounds = {\n      fall,\n    }\n  }\n\n  die() {\n    this.states.died = true;\n    this._sounds.fall.play();\n    this.mesh?.physicsImpostor?.dispose();\n    this.scene.beginDirectAnimation(this.mesh, dieAnimation(), 0, 5, false);\n  }\n\n  async initMesh() {\n    const mesh = await SceneLoader.ImportMeshAsync(\"\", `assets/scene-1/meshes/cat/`, \"cat.babylon\", this.scene);\n    const player = <Mesh> mesh.meshes[0];\n\n    player.name = \"player\"\n    player.parent = null;\n    player.position = new Vector3(-1.5, 1, 3.55);\n    player.rotation.y += -Math.PI / 2;\n  \n    player.physicsImpostor = new PhysicsImpostor(\n      player, PhysicsImpostor.BoxImpostor, \n      { mass: 0.8, restitution: 0 }\n    );\n\n    player.rotationQuaternion = null;\n    this._mesh = player;\n  }\n\n  get mesh() {\n    return this._mesh;\n  }\n}\n","import {Animation } from 'babylonjs';\n\nexport const dieAnimation = () => {\n  const frameRate = 0.2;\n  const positionFrames = [];\n  const rotationFrames = [];\n\n  const position = new Animation(\n    \"ySlide\",\n    \"position.y\",\n    frameRate,\n    Animation.ANIMATIONTYPE_FLOAT,\n    Animation.ANIMATIONLOOPMODE_CONSTANT\n  );\n\n  const rotation = new Animation(\n    \"Rotation\", \n    \"rotation.x\", \n    frameRate, \n    Animation.ANIMATIONTYPE_FLOAT,\n    Animation.ANIMATIONLOOPMODE_CONSTANT\n  );\n\n  positionFrames.push({ frame: 0 * frameRate, value: -0.56 });\n  positionFrames.push({ frame: 0.8 * frameRate, value: 1 });\n  positionFrames.push({ frame: 2.3 * frameRate, value: -6 });\n  position.setKeys(positionFrames);\n\n \n  rotationFrames.push({ frame: 0 * frameRate, value: -Math.PI/2 });\n  rotationFrames.push({ frame: 0.8 * frameRate, value: Math.PI/2 });\n  rotation.setKeys(rotationFrames);\n\n  return [position, rotation];\n}","import { Mesh, Nullable, Sound, Texture } from 'babylonjs';\nimport { TGenericObject } from '../utils/types';\n\nexport interface IPrefab {\n  events: Nullable<TGenericObject>;\n  states: Nullable<TGenericObject>;\n}\n\nexport abstract class APrefab implements IPrefab {\n  protected _mesh!: Mesh;\n  protected _parent!: Mesh;\n  protected _texture!: Texture;\n  protected _sounds!: TGenericObject<Sound>;\n\n  events = {};\n  states = {};\n\n  abstract initMesh(): void;\n  abstract initSounds(): void;\n}\n","export class ListNode<T> {\n  constructor(\n      public mesh: T | null,\n      public next: ListNode<T> | null = null\n  ) {\n      this.next = null;\n  }\n}\n\nexport class ChainedList<T> {\n  private _head: ListNode<T> | null = null\n  private _last: ListNode<T> | null = null\n  private _size = 0;\n\n  constructor() {}\n\n  get head() {\n      return this._head;\n  }\n\n  get last() {\n      return this._last;\n  }\n\n  \n  get size() {\n      return this._size;\n  }\n\n  removeFirstItem() {\n      if (this._head) {\n          this._head = this._head.next;\n          this._size--;\n      }\n  }\n\n  addItem(item: ListNode<T>) {\n      if (!this.head) {\n          this._head = item;\n      }\n\n      if (this.last) {\n          this.last.next = item;\n      }\n\n      this._size++;\n      this._last = item;\n  }\n\n  clear() {\n      this._head = null;\n  }\n}","import { Mesh, Scene, Vector3 } from 'babylonjs';\nimport { ChainedList, ListNode } from '../chained-list/chained-list';\nimport { IInfiniteBackground, TCoordinates, TInstance, TOptions } from './types';\n\n/**\n * TODO:\n * Adicionar validação de limiter por raio permitindo o threshold ser para qualquer direção\n * Colocar tudo como filho de um mesh especifico para facilitar o debug. Talvez um mesh do infinite scrolling ou o proprio baseMesh\n * Não posso partir do pressuposto que a imagem está no centro, nem que a camera está no centro, preciso, ou de parametros para isso, ou definir isso programaticamente\n * Fazer o calculo de spawnPlace e despawnPlace pra quando o spawn for a esquerda do despawn \n */\nexport class InfiniteBackground {\n  name: string;\n  container: Mesh;\n  parent?: Mesh;\n  meshes: Mesh[];\n  instances: ChainedList<Mesh>;\n  instancesQty = 0;\n\n  constructor(\n    name: string,\n    meshes: IInfiniteBackground['mesh'][],\n    scene: Scene, {\n      velocityX = 0, \n      velocityY = 0, \n      instancesQty = 2,\n      ...opts\n    }: TOptions\n  ) {\n    this.parent = opts.parent;\n    this.container = new Mesh(`${name}-infinity-container`, scene);\n    this.name = name;\n    this.meshes = meshes;\n    this.instances = new ChainedList<Mesh>();\n\n    this.initializeMeshes(opts.despawnPlace);\n\n    this.fillSpawnSpace(opts.spawnPlace, opts.despawnPlace);\n\n    scene.onBeforeRenderObservable.add(() => {\n      const animationRatio = scene.getAnimationRatio();\n      let instance = this.instances.head;\n\n      while (instance) {\n        instance.mesh!.position.x += velocityX * animationRatio;\n        instance.mesh!.position.y += velocityY * animationRatio;\n\n        instance = instance.next;\n\n        if (this.instances.last!.mesh!.position.x < opts.spawnPlace.x) this.addInstance();\n        if (instance && instance.mesh!.position.x < opts.despawnPlace.x) this.removeInstance();\n      }\n    })\n  }\n\n  removeInstance() {\n    this.instances.head!.mesh!.dispose();\n    this.instances.removeFirstItem();\n  }\n\n  initializeMeshes(spawnPlace: TCoordinates) {\n    this.parent?.addChild(this.container);\n\n    this.meshes.forEach(mesh => {\n      mesh.setEnabled(false);\n    });\n  }\n\n  positionLastMesh(mesh: Mesh) {\n    const lastMeshSize = this.instances.last!.mesh!.getBoundingInfo().boundingBox.extendSizeWorld;\n    const lastMeshPosition = this.instances.last!.mesh!.position;\n    const currentMeshSize = mesh.getBoundingInfo().boundingBox.extendSizeWorld;\n    const positionX = lastMeshPosition.x + lastMeshSize.x + currentMeshSize.x;\n    const positionY = lastMeshPosition.y;\n    const positionZ = lastMeshPosition.z;\n\n    mesh.position = new Vector3(positionX, positionY, positionZ);\n  }\n\n  fillSpawnSpace(spawnPlace: TCoordinates, despawnPlace: TCoordinates) {\n    this.instances.addItem(new ListNode(this.getMesh()));\n    let hasEnougth = false;\n    \n    this.instances.last!.mesh!.position = new Vector3(despawnPlace.x, despawnPlace.y, despawnPlace.z);\n    \n    while(!hasEnougth) {\n      const mesh = this.getMesh();\n\n      this.positionLastMesh(mesh);\n      this.instances.addItem(new ListNode(mesh));\n\n      if (this.instances.last!.mesh!.position.x > spawnPlace.x) {\n        hasEnougth = true;\n      }\n    }\n  }\n\n  addInstance() {\n    const instance = this.getMesh();\n\n    this.positionLastMesh(instance);\n\n    this.instances.addItem(new ListNode(instance));\n  }\n\n  getMesh(): Mesh {\n    const index = Math.floor(Math.random() * this.meshes.length);\n    const clone = this.meshes[index].clone();\n    \n    clone.setEnabled(true);\n    this.container?.addChild(clone);\n    \n    clone.name = `${this.instancesQty}-${this.name}`;\n    this.instancesQty++;\n\n    return clone;\n  }\n}\n","import { Color3, Mesh, MeshBuilder, Scene, StandardMaterial, Texture } from 'babylonjs';\nimport { InfiniteBackground } from '../../../../utils/infinite-background/infinite-background';\n\nexport function createSky(scene: Scene) {\n  const background = MeshBuilder.CreatePlane('sky', { width: 10, height: 20 });\n  const backgroundMaterial = new StandardMaterial('skyMaterial', scene);\n  const parent = new Mesh(\"sky\", scene);\n\n  background.position.z = 5;\n  background.position.y = 0.3;\n\n  backgroundMaterial.diffuseColor = new Color3(95/255, 165/255, 245/255);\n  backgroundMaterial.specularColor = new Color3(0, 0, 0);\n  background.material = backgroundMaterial;\n\n  new InfiniteBackground('sky', [background], scene, {\n    velocityX: -0.01,\n    parent,\n    spawnPlace: {\n      z: 20,\n      x: 26,\n      y: 0\n    },\n    despawnPlace: {\n      z: 20,\n      x: -15,\n      y: 0\n    }\n  })\n\n  return background;\n}","import { Color3, Color4, Mesh, MeshBuilder, PhysicsImpostor, Scene, StandardMaterial, Texture, Vector3 } from 'babylonjs';\nimport { InfiniteBackground } from '../../../../utils/infinite-background/infinite-background';\n\nexport function createGround(scene: Scene) {\n  const container = new Mesh(\"ground\", scene);\n\n  const sliderGround = createSliderGround(scene, container);\n  const invisibleGround = createInvisibleGround(scene);\n\n  container.addChild(sliderGround);\n  container.addChild(invisibleGround);\n\n  return {\n    sliderGround,\n    invisibleGround\n  }\n}\n\nfunction createSliderGround(scene: Scene, container: Mesh) {\n  const sliderGround = MeshBuilder.CreateBox('slider-ground', { width: 10, height: 1 });\n  const sliderGroundMaterial = new StandardMaterial('groundMaterial', scene);\n\n  sliderGroundMaterial.diffuseTexture = new Texture(\"assets/scene-1/textures/ground.png\", scene);\n  sliderGroundMaterial.diffuseTexture.hasAlpha = true;\n  sliderGroundMaterial.specularColor = new Color3(0, 0, 0);\n  sliderGround.material = sliderGroundMaterial;\n\n  new InfiniteBackground('slider-ground', [sliderGround], scene, {\n    velocityX: -0.05, \n    parent: container, \n    spawnPlace: {\n      x: 8,\n      z: 3.55,\n      y: -1.5\n    },\n    despawnPlace: {\n      x: -8,\n      z: 3.55,\n      y: -1.5\n    },\n  });\n\n  return sliderGround;\n}\n\nfunction createInvisibleGround(scene: Scene) {\n  const invisibleGround = MeshBuilder.CreateBox('invisible-ground', { size: 1 });\n  const invisibleGroundMaterial = new StandardMaterial('groundMaterial', scene);\n\n  invisibleGround.position = new Vector3(-1.5, -1.5, 3.55);\n\n  invisibleGroundMaterial.alpha = 0;\n  invisibleGround.material = invisibleGroundMaterial;\n\n  invisibleGround.physicsImpostor = new PhysicsImpostor(invisibleGround, PhysicsImpostor.BoxImpostor, {\n    mass: 0,\n    restitution: 0\n  });\n\n  return invisibleGround;\n}\n\n\n","import { Mesh, Scene, SceneLoader } from 'babylonjs';\nimport { InfiniteBackground } from '../../../../utils/infinite-background/infinite-background';\n\nexport async function createBackground(scene: Scene) {\n  const test = await SceneLoader.ImportMeshAsync(\"\", `assets/scene-1/meshes/background/casas/`, \"test.babylon\", scene);\n  const parent = new Mesh(\"background\", scene);\n\n  test.meshes.forEach(mesh => {\n    parent.addChild(mesh);\n  })\n\n  new InfiniteBackground(\n    'background',\n    test.meshes as Mesh[],\n    scene, {\n    velocityX: -0.05,\n    parent,\n    spawnPlace: {\n      z: 13,\n      x: 26,\n      y: -2\n    },\n    despawnPlace: {\n      z: 13,\n      x: -15,\n      y: -1.5\n    }\n  });\n}\n","import { ArcRotateCamera, Scene, Vector3 } from 'babylonjs';\n\nexport function createCamera(scene: Scene) {\n  const camera = new ArcRotateCamera('camera', -Math.PI / 2, Math.PI / 2, 0, new Vector3(0, 0, 0), scene);\n  camera.radius = 0;\n  camera.attachControl(true);\n\n  return camera;\n}","import { ActionManager, ExecuteCodeAction, Mesh, Scene, Sound, Vector3 } from 'babylonjs';\nimport { Player } from '../meshes/player/player';\nimport { IMove } from '../types';\n\nexport function move(scene: Scene, player: Player, opts: IMove): IMove {\n  const tempOpts = { ...opts };\n  const inputMap: { [key: string]: boolean } = {};\n  const newScene = scene;\n\n  const jump = new Sound(\"jump\", \"assets/scene-1/songs/jump.mp3\", scene, null, {\n    volume: 0.5\n  });\n\n  newScene.actionManager = new ActionManager(scene);\n\n  newScene.actionManager.registerAction(\n    new ExecuteCodeAction(ActionManager.OnKeyDownTrigger, function handleKeyDown(evt) {\n      inputMap[evt.sourceEvent.key] = evt.sourceEvent.type === 'keydown';\n    })\n  );\n\n  newScene.actionManager.registerAction(\n    new ExecuteCodeAction(ActionManager.OnKeyUpTrigger, function handleKeyUp(evt) {\n      inputMap[evt.sourceEvent.key] = evt.sourceEvent.type === 'keydown';\n    })\n  );\n\n  newScene.onBeforeRenderObservable.add(() => {\n    if (inputMap[' '] && tempOpts.jumping.canJump) {\n      const impulseDirection = new Vector3(0, 1, 0);\n      const impulseMagnitude = 4.5;\n\n      jump.play();\n\n      if (player && player.mesh.physicsImpostor) {\n        tempOpts.jumping.isJumping = true;\n        tempOpts.jumping.canJump = false;\n        player.mesh.physicsImpostor.setLinearVelocity(new Vector3(0, 0, 0));\n        player.mesh.physicsImpostor.applyImpulse(impulseDirection.scale(impulseMagnitude), player.mesh.getAbsolutePosition());\n      }\n    }\n  });\n\n  return tempOpts;\n}","import { Observable } from 'babylonjs';\n\nconst StoreSingleton = function (this: any) {\n  this.score = 0;\n\n  this.onUpdateScore = new Observable();\n\n  return this;\n} as any as { new (): any; };\n\nconst Store = new StoreSingleton();\n\nexport { Store };","import { Mesh, MeshBuilder, Scene, SceneLoader, Sound, StandardMaterial, Vector3 } from 'babylonjs';\nimport cloneDeep from 'lodash.clonedeep';\nimport { stringify } from 'querystring';\nimport { IPrefab } from '../../../../interfaces/Prefab';\nimport { Store } from '../../../../store/store';\nimport { Player } from '../meshes/player/player';\nimport { IObstacles } from './types';\n\nexport class Obstacles implements IObstacles {\n  private prevTime = new Date().getTime();\n  private currentTime = new Date().getTime();\n  private trySpawnTime = new Date().getTime();\n  private obstacleLimit: Mesh | undefined;\n  private trySpawnTimeout: number = 0;\n  private activeElement: Mesh[] = [];\n  private obstacles: Mesh[] = [];\n  private container: Mesh;\n  private obstacleCounter = 0;\n\n  constructor(\n    private scene: Scene, \n    private player: Player,\n  ) {\n    this.container = new Mesh(\"obstacles-container\");\n    this.createObstaclesLimit();\n\n    this.scene.onBeforeRenderObservable.add(() => {\n      const animationRatio = this.scene.getAnimationRatio();\n\n      for (let i = this.activeElement.length - 1; i >= 0; i--) {\n        this.activeElement[i].position.x += -0.05 * animationRatio;\n\n        if (this.jumpedObstacle(this.activeElement[i])) {\n          Store.onUpdateScore.notifyObservers(++Store.score);\n        }\n\n        this.checkObstacleHit(this.activeElement[i]);\n        this.checkObstacleHitsLimit(this.activeElement[i], i);\n      }\n    });\n  }\n\n  private checkObstacleHit(obstacle: Mesh) {\n    if (this.player.mesh?.intersectsMesh(obstacle) && !this.player.states.died) {\n      this.player.events.die();\n    }\n  }\n\n  private checkObstacleHitsLimit(obstacle: Mesh, i: number) {\n    if (this.obstacleLimit?.intersectsMesh(obstacle)) {\n      this.activeElement[i].dispose();\n      this.activeElement.splice(i, 1);\n    }\n  }\n\n  private jumpedObstacle(obstacle: Mesh) {\n    const pointPlane = obstacle.getChildMeshes()[0];\n    const intersected = pointPlane ? pointPlane.intersectsMesh(this.player.mesh!) : false;\n\n    if (intersected) {\n      pointPlane.dispose();\n    }\n\n    return intersected;\n  }\n\n  private canSpawn(minDelay: number, maxDelay: number) {\n    const isMaxDelay = this.currentTime - this.prevTime > maxDelay;\n    const isMinDelay = this.currentTime - this.prevTime > minDelay;\n    const canTry = this.currentTime - this.trySpawnTime > this.trySpawnTimeout;\n    let shouldSpawn = false;\n\n    if (canTry) {\n      this.trySpawnTime = this.currentTime;\n\n      if (isMinDelay) {\n        shouldSpawn = Math.random() > 0.5;\n        \n        if (isMaxDelay) shouldSpawn = true;\n      }\n    }\n\n    if (shouldSpawn) this.prevTime = this.currentTime;\n\n    return shouldSpawn;\n  }\n\n  private generateElement() {\n    const obstacle = this.obstacleCounter;\n    let kind = this.obstacles;\n    \n    const index = Math.floor(Math.random() * kind.length);\n\n    this.obstacleCounter++;\n\n    return kind[index].clone(`obstacle-${obstacle}`);\n  }\n\n  private spawnObstacle() {\n    const obstacle = this.generateElement();\n    const pointPlane = MeshBuilder.CreatePlane('pointPlane', { width: 1, height: 5 }, this.scene);\n    const planeMaterial = new StandardMaterial('planeMateral', this.scene);\n    \n    obstacle.position.z = 3.55;\n    obstacle.position.y = -1;\n    obstacle.position.x = 3;\n    \n    planeMaterial.alpha = 0;\n    pointPlane.rotation.y = Math.PI / 2;\n    pointPlane.material = planeMaterial;\n    pointPlane.position = new Vector3(3, -1, 3.55);\n\n    obstacle.addChild(pointPlane);\n    this.container.addChild(obstacle);    \n    this.activeElement.push(obstacle);\n  }\n\n  private async createObstacles() {\n    const trash = await SceneLoader.ImportMeshAsync(null, `assets/scene-1/meshes/obstacles/trash/`, \"trash.babylon\", this.scene);\n    trash.meshes[0].rotationQuaternion = null;\n    trash.meshes[0].rotation.y = Math.PI;\n    trash.meshes[0].rotation.x = -Math.PI / 2;\n    trash.meshes[0].position.z = -100;\n    trash.meshes[0].name = \"trash\";\n    this.container.addChild(trash.meshes[0]);\n\n    const dog = await SceneLoader.ImportMeshAsync(null, `assets/scene-1/meshes/obstacles/dog/`, \"dog.babylon\", this.scene);\n    dog.meshes[0].scaling = new Vector3(0.5, 0.5, 0.5);\n    dog.meshes[0].rotationQuaternion = null;\n    dog.meshes[0].rotation.y = Math.PI / 2;\n    dog.meshes[0].position.z = -100;\n    dog.meshes[0].name = \"dog\";\n    this.container.addChild(dog.meshes[0]);\n\n    const cone = await SceneLoader.ImportMeshAsync(null, `assets/scene-1/meshes/obstacles/cone/`, \"cone.babylon\", this.scene);\n    cone.meshes[0].scaling = new Vector3(0.5, 0.5, 0.5); \n    cone.meshes[0].rotationQuaternion = null;\n    cone.meshes[0].rotation.y = Math.PI / 2;\n    cone.meshes[0].position.z = -100;\n    cone.meshes[0].name = \"cone\";\n    this.container.addChild(cone.meshes[0]);\n\n    const bucket = await SceneLoader.ImportMeshAsync(null, `assets/scene-1/meshes/obstacles/bucket/`, \"bucket.babylon\", this.scene);\n    bucket.meshes[0].scaling = new Vector3(0.005, 0.005, 0.005); \n    bucket.meshes[0].rotationQuaternion = null;\n    bucket.meshes[0].rotation.y = Math.PI / 2;\n    bucket.meshes[0].position.z = -100;\n    bucket.meshes[0].name = \"bucket\";\n    this.container.addChild(bucket.meshes[0]);\n\n    this.obstacles = [\n      trash.meshes[0],\n      cone.meshes[0],\n      dog.meshes[0],\n      bucket.meshes[0],\n    ] as Mesh[];\n  }\n\n  private createObstaclesLimit() {\n    this.obstacleLimit = MeshBuilder.CreatePlane(\"plane\", { width: 10, height: 10 }, this.scene);\n    this.obstacleLimit.position = new Vector3(-10, 0, 3.5);\n    this.obstacleLimit.rotationQuaternion = null;\n    this.obstacleLimit.rotation.y = -Math.PI / 2;\n  }\n  \n  init() {\n    this.createObstacles();\n  }\n\n  spawnWithDelay(minDelay: number, maxDelay: number) {\n    this.currentTime = new Date().getTime();\n    this.trySpawnTimeout = Math.floor(minDelay / 4);\n\n    if (this.canSpawn(minDelay, maxDelay)) {\n      this.spawnObstacle();\n    }\n  }\n}","import { Color3, Mesh, MeshBuilder, Scene, StandardMaterial, Texture } from 'babylonjs';\nimport { InfiniteBackground } from '../../../../utils/infinite-background/infinite-background';\n\nexport function createMountains(scene: Scene) {\n  const mountain = MeshBuilder.CreatePlane('mountain', { width: 20, height: 4 });\n  const mountainMaterial = new StandardMaterial('mountainMaterial', scene);\n  const parent = new Mesh(\"mountain\", scene);\n\n  mountain.position.z = 5;\n  mountain.position.y = 0.3;\n\n  mountainMaterial.diffuseTexture = new Texture(\"assets/scene-1/textures/mountains.png\", scene);\n  mountainMaterial.diffuseTexture.hasAlpha = true;\n  mountainMaterial.specularColor = new Color3(0, 0, 0);\n  mountain.material = mountainMaterial;\n\n  new InfiniteBackground('mountain', [mountain], scene, {\n    velocityX: -0.01,\n    parent,\n    spawnPlace: {\n      z: 17,\n      x: 26,\n      y: 0.1\n    },\n    despawnPlace: {\n      z: 17,\n      x: -15,\n      y: 0.1\n    }\n  })\n\n  return mountain;\n}","import { Color3, Mesh, MeshBuilder, Scene, StandardMaterial, Texture } from 'babylonjs';\nimport { InfiniteBackground } from '../../../../utils/infinite-background/infinite-background';\n\nexport function createStreet(scene: Scene) {\n  const street = MeshBuilder.CreatePlane('street', { width: 10, height: 10 });\n  const streetMaterial = new StandardMaterial('streetMaterial', scene);\n  const texture = new Texture(\"assets/scene-1/textures/street.png\", scene);\n  const parent = new Mesh(\"street\", scene);\n  \n  texture.wAng = -Math.PI / 2;\n\n  street.position.z = 5;\n  street.position.y = 0.3;\n  street.rotation.x = Math.PI / 2;\n\n  streetMaterial.diffuseTexture = texture;\n  streetMaterial.diffuseTexture.hasAlpha = true;\n  streetMaterial.specularColor = new Color3(0, 0, 0);\n  street.material = streetMaterial;\n\n  new InfiniteBackground('street', [street], scene, {\n    velocityX: -0.05,\n    parent,\n    spawnPlace: {\n      z: 10.5,\n      x: 26,\n      y: -1.4\n    },\n    despawnPlace: {\n      z: 10.5,\n      x: -15,\n      y: -1.4\n    }\n  })\n\n  return street;\n}","import { Color3, Mesh, MeshBuilder, Scene, StandardMaterial, Texture } from 'babylonjs';\nimport { InfiniteBackground } from '../../../../utils/infinite-background/infinite-background';\n\nexport function createFence(scene: Scene) {\n  const fence = MeshBuilder.CreatePlane('fence', { width: 0.2, height: 1 });\n  const fenceMaterial = new StandardMaterial('fenceMaterial', scene);\n  const texture = new Texture(\"assets/scene-1/textures/fence.png\", scene);\n  const parent = new Mesh(\"fence\", scene);\n\n  fence.position.z = 5;\n  fence.position.y = 0.3;\n\n  fenceMaterial.diffuseTexture = texture;\n  fenceMaterial.diffuseTexture.hasAlpha = true;\n  fenceMaterial.specularColor = new Color3(0, 0, 0);\n  fence.material = fenceMaterial;\n\n  new InfiniteBackground('fence', [fence], scene, {\n    velocityX: -0.05,\n    parent,\n    spawnPlace: {\n      z: 14.7,\n      x: 26,\n      y: -1\n    },\n    despawnPlace: {\n      z: 14.7,\n      x: -15,\n      y: -1\n    }\n  })\n\n  return fence;\n}","import {\n  Vector3,\n  HemisphericLight,\n  Scene,\n  AmmoJSPlugin,\n  PhysicsImpostor,\n  MeshBuilder,\n  SceneLoader,\n  Color4,\n  Sound,\n} from 'babylonjs';\n\nimport SceneComponent from '../../../components/SceneComponent/SceneComponent';\n\nimport { memo } from 'react';\nimport { Player } from './meshes/player/player';\nimport { createSky } from './meshes/sky';\nimport { createGround } from './meshes/ground';\nimport { createBackground } from './meshes/city';\nimport { createCamera } from './camera';\nimport { move } from './movement/movement';\nimport { Obstacles } from './obstacles/obstacles';\nimport { createMountains } from './meshes/mountains';\nimport { createStreet } from './meshes/street';\nimport { createFence } from './meshes/fence';\nimport { IMove } from './types';\n\nasync function onSceneMount(scene: Scene) {\n  const engine = scene.getEngine();\n  scene.enablePhysics(null, new AmmoJSPlugin(false));\n  \n  createCamera(scene);\n  createStreet(scene);\n  createFence(scene);\n  createSky(scene);\n  createMountains(scene);\n  createBackground(scene);\n  const { invisibleGround, sliderGround } = createGround(scene);\n  const player = new Player(scene);\n\n  await player.initMesh();\n\n  const light = new HemisphericLight('light', new Vector3(0, 0, 0), scene);\n  light.intensity = 2;\n  const obstacles = new Obstacles(scene, player);\n  await obstacles.init();\n\n  let moveOpts: IMove = {\n    jumping: {\n      canJump: false,\n      isJumping: false,\n      jumpStartTime: 0,\n    },\n  }\n  \n  new Sound(\"BgMusic\", \"assets/scene-1/songs/bg-music.mp3\", scene, null, {\n    loop: true,\n    autoplay: true,\n    volume: 0.2,\n  });\n\n  moveOpts = move(scene, player, moveOpts);\n  \n  player.mesh!.physicsImpostor!.registerOnPhysicsCollide(invisibleGround.physicsImpostor!, () => {\n    moveOpts.jumping.canJump = true;\n    moveOpts.jumping.isJumping = false;\n  });\n  \n  scene.onBeforeRenderObservable.add(() => {\n    obstacles.spawnWithDelay(1000, 2000);\n  });\n\n  scene.debugLayer.show();\n}\n\nfunction Game() {\n  return (\n    <SceneComponent \n      antialias \n      id=\"babylonscene\"\n      adaptToDeviceRatio \n      onSceneReady={onSceneMount} \n    />\n  );\n}\n\nexport default memo(Game)\n","import scss from './Score.module.scss';\n\nimport { IScore } from './types';\n\nexport function Score(props: IScore) {\n  return (\n    <span className={scss.score}>\n      {props.score}\n    </span>\n  )\n}","import scss from './index.module.scss';\nimport { Score } from './score/Score';\nimport { IUi } from './types';\n\nexport function UI(props: IUi) {\n  return (\n    <div className={scss.ui}>\n      <Score score={props.score} />\n    </div>\n  );\n}","import scss from './index.module.scss';\n\nimport Game from './game';\nimport { UI } from './ui';\nimport { useEffect, useState } from 'react';\n\nimport { Store } from '../../store/store';\n\nfunction Scene1() {\n  const [score, setScore] = useState(0);\n\n  useEffect(() => {\n    Store.onUpdateScore.add((score: number) => {\n      setScore(score);\n    })\n  }, []);\n\n  return (\n    <div className={scss.canvaContainer}>\n      <Game />\n      <UI score={score} />\n    </div>\n  );\n}\n\nexport default Scene1;\n","import Scene1 from './scenes/scene-1';\n\nconst App = () => <Scene1 />\n\nexport default App;","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://cra.link/PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://cra.link/PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://cra.link/PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log('No internet connection found. App is running in offline mode.');\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then((registration) => {\n        registration.unregister();\n      })\n      .catch((error) => {\n        console.error(error.message);\n      });\n  }\n}\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorkerRegistration from './serviceWorkerRegistration';\nimport reportWebVitals from './reportWebVitals';\n\nimport * as Ammo from 'ammo.js';\n\nAmmo().then(() => {\n  ReactDOM.render(\n    <React.StrictMode>\n      <App />\n    </React.StrictMode>,\n    document.getElementById('root')\n  );\n  // If you want your app to work offline and load faster, you can change\n  // unregister() to register() below. Note this comes with some pitfalls.\n  // Learn more about service workers: https://cra.link/PWA\n  serviceWorkerRegistration.unregister();\n  \n  // If you want to start measuring performance in your app, pass a function\n  // to log results (for example: reportWebVitals(console.log))\n  // or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n  reportWebVitals();\n});\n\n"],"sourceRoot":""}